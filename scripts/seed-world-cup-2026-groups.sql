-- =============================================================================
-- Seed Mundial 2026 - Fase de grupos (equipos + partidos)
-- Ejecutar en: Supabase Dashboard → SQL Editor
-- Requiere: tablas teams y matches ya creadas (migración 001_initial_schema)
-- Idempotente: ON CONFLICT DO NOTHING en equipos y partidos
-- =============================================================================

-- 1. Equipos (solo insertar si no existen por codigo)
INSERT INTO teams (nombre, codigo, grupo)
VALUES
  ('Sudáfrica', 'RSA', 'A'),
  ('Corea del Sur', 'KOR', 'A'),
  ('Por definir (UEFA Path D)', 'UEP_D', 'A'),
  ('Catar', 'QAT', 'B'),
  ('Suiza', 'SUI', 'B'),
  ('Por definir (UEFA Path A)', 'UEP_A', 'B'),
  ('Marruecos', 'MAR', 'C'),
  ('Haití', 'HAI', 'C'),
  ('Escocia', 'SCO', 'C'),
  ('Paraguay', 'PAR', 'D'),
  ('Australia', 'AUS', 'D'),
  ('Por definir (UEFA Path C)', 'UEP_C', 'D'),
  ('Curazao', 'CUW', 'E'),
  ('Costa de Marfil', 'CIV', 'E'),
  ('Ecuador', 'ECU', 'E'),
  ('Japón', 'JPN', 'F'),
  ('Por definir (UEFA Path B)', 'UEP_B', 'F'),
  ('Túnez', 'TUN', 'F'),
  ('Egipto', 'EGY', 'G'),
  ('Irán', 'IRN', 'G'),
  ('Nueva Zelanda', 'NZL', 'G'),
  ('Cabo Verde', 'CPV', 'H'),
  ('Arabia Saudita', 'KSA', 'H'),
  ('Senegal', 'SEN', 'I'),
  ('Por definir (IC Path 2)', 'ICP_2', 'I'),
  ('Noruega', 'NOR', 'I'),
  ('Argelia', 'ALG', 'J'),
  ('Austria', 'AUT', 'J'),
  ('Jordania', 'JOR', 'J'),
  ('Por definir (IC Path 1)', 'ICP_1', 'K'),
  ('Uzbekistán', 'UZB', 'K'),
  ('Croacia', 'CRO', 'L'),
  ('Ghana', 'GHA', 'L'),
  ('Panamá', 'PAN', 'L')
ON CONFLICT (codigo) DO NOTHING;

-- 2. Partidos fase de grupos (1-72). ON CONFLICT (external_id) DO NOTHING
INSERT INTO matches (equipo_local_id, equipo_visitante_id, fase, fecha_hora, estadio, estado, predicciones_cerradas, external_id)
SELECT t1.id, t2.id, 'grupos', u.fecha_hora, u.estadio, 'proximo', false, u.external_id
FROM (VALUES
  (1, 'MEX', 'RSA', '2026-06-11T19:00:00Z', 'Estadio Azteca, Ciudad de México'),
  (2, 'KOR', 'UEP_D', '2026-06-12T02:00:00Z', 'Estadio Akron, Guadalajara'),
  (3, 'CAN', 'UEP_A', '2026-06-12T19:00:00Z', 'BMO Field, Toronto'),
  (4, 'USA', 'PAR', '2026-06-13T01:00:00Z', 'SoFi Stadium, Los Ángeles'),
  (5, 'BRA', 'MAR', '2026-06-13T22:00:00Z', 'Gillette Stadium, Boston'),
  (6, 'AUS', 'UEP_C', '2026-06-14T04:00:00Z', 'BC Place, Vancouver'),
  (7, 'HAI', 'SCO', '2026-06-13T22:00:00Z', 'MetLife Stadium, Nueva York/Nueva Jersey'),
  (8, 'QAT', 'SUI', '2026-06-13T19:00:00Z', 'Levi''s Stadium, San Francisco'),
  (9, 'GER', 'CUW', '2026-06-14T17:00:00Z', 'Lincoln Financial Field, Filadelfia'),
  (10, 'CIV', 'ECU', '2026-06-14T23:00:00Z', 'NRG Stadium, Houston'),
  (11, 'NED', 'JPN', '2026-06-14T20:00:00Z', 'AT&T Stadium, Arlington'),
  (12, 'UEP_B', 'TUN', '2026-06-15T02:00:00Z', 'Estadio BBVA, Monterrey'),
  (13, 'ESP', 'CPV', '2026-06-15T16:00:00Z', 'Hard Rock Stadium, Miami'),
  (14, 'KSA', 'URU', '2026-06-15T22:00:00Z', 'Mercedes-Benz Stadium, Atlanta'),
  (15, 'BEL', 'EGY', '2026-06-15T19:00:00Z', 'SoFi Stadium, Los Ángeles'),
  (16, 'IRN', 'NZL', '2026-06-16T01:00:00Z', 'Lumen Field, Seattle'),
  (17, 'FRA', 'SEN', '2026-06-16T19:00:00Z', 'MetLife Stadium, Nueva York/Nueva Jersey'),
  (18, 'ICP_2', 'NOR', '2026-06-16T22:00:00Z', 'Gillette Stadium, Boston'),
  (19, 'ARG', 'ALG', '2026-06-17T01:00:00Z', 'Arrowhead Stadium, Kansas City'),
  (20, 'AUT', 'JOR', '2026-06-17T04:00:00Z', 'Levi''s Stadium, Santa Clara'),
  (21, 'ENG', 'CRO', '2026-06-17T20:00:00Z', 'BMO Field, Toronto'),
  (22, 'GHA', 'PAN', '2026-06-17T23:00:00Z', 'AT&T Stadium, Arlington'),
  (23, 'POR', 'ICP_1', '2026-06-17T17:00:00Z', 'NRG Stadium, Houston'),
  (24, 'UZB', 'COL', '2026-06-18T02:00:00Z', 'Estadio Azteca, Ciudad de México'),
  (25, 'UEP_D', 'RSA', '2026-06-18T16:00:00Z', 'Mercedes-Benz Stadium, Atlanta'),
  (26, 'SUI', 'UEP_A', '2026-06-18T19:00:00Z', 'SoFi Stadium, Los Ángeles'),
  (27, 'CAN', 'QAT', '2026-06-18T22:00:00Z', 'BC Place, Vancouver'),
  (28, 'MEX', 'KOR', '2026-06-19T01:00:00Z', 'Estadio Akron, Guadalajara'),
  (29, 'BRA', 'HAI', '2026-06-20T01:00:00Z', 'Lincoln Financial Field, Filadelfia'),
  (30, 'SCO', 'MAR', '2026-06-19T22:00:00Z', 'Gillette Stadium, Boston'),
  (31, 'UEP_C', 'PAR', '2026-06-20T04:00:00Z', 'Levi''s Stadium, Santa Clara'),
  (32, 'USA', 'AUS', '2026-06-19T19:00:00Z', 'Lumen Field, Seattle'),
  (33, 'GER', 'CIV', '2026-06-20T20:00:00Z', 'BMO Field, Toronto'),
  (34, 'ECU', 'CUW', '2026-06-21T00:00:00Z', 'Arrowhead Stadium, Kansas City'),
  (35, 'NED', 'UEP_B', '2026-06-20T17:00:00Z', 'NRG Stadium, Houston'),
  (36, 'TUN', 'JPN', '2026-06-21T04:00:00Z', 'Estadio BBVA, Monterrey'),
  (37, 'ESP', 'KSA', '2026-06-21T16:00:00Z', 'Hard Rock Stadium, Miami'),
  (38, 'URU', 'CPV', '2026-06-21T22:00:00Z', 'Mercedes-Benz Stadium, Atlanta'),
  (39, 'BEL', 'IRN', '2026-06-21T19:00:00Z', 'SoFi Stadium, Los Ángeles'),
  (40, 'NZL', 'EGY', '2026-06-22T01:00:00Z', 'BC Place, Vancouver'),
  (41, 'FRA', 'ICP_2', '2026-06-22T21:00:00Z', 'MetLife Stadium, Nueva York/Nueva Jersey'),
  (42, 'NOR', 'SEN', '2026-06-23T00:00:00Z', 'Lincoln Financial Field, Filadelfia'),
  (43, 'ARG', 'AUT', '2026-06-22T17:00:00Z', 'AT&T Stadium, Arlington'),
  (44, 'JOR', 'ALG', '2026-06-23T03:00:00Z', 'Levi''s Stadium, Santa Clara'),
  (45, 'ENG', 'GHA', '2026-06-23T20:00:00Z', 'MetLife Stadium, Nueva York/Nueva Jersey'),
  (46, 'PAN', 'CRO', '2026-06-23T23:00:00Z', 'BMO Field, Toronto'),
  (47, 'POR', 'UZB', '2026-06-23T17:00:00Z', 'NRG Stadium, Houston'),
  (48, 'COL', 'ICP_1', '2026-06-24T02:00:00Z', 'Estadio Akron, Guadalajara'),
  (49, 'SCO', 'BRA', '2026-06-24T22:00:00Z', 'Hard Rock Stadium, Miami'),
  (50, 'MAR', 'HAI', '2026-06-24T22:00:00Z', 'Mercedes-Benz Stadium, Atlanta'),
  (51, 'SUI', 'CAN', '2026-06-24T19:00:00Z', 'BC Place, Vancouver'),
  (52, 'UEP_A', 'QAT', '2026-06-24T19:00:00Z', 'Lumen Field, Seattle'),
  (53, 'UEP_D', 'MEX', '2026-06-25T01:00:00Z', 'Estadio Azteca, Ciudad de México'),
  (54, 'RSA', 'KOR', '2026-06-25T01:00:00Z', 'Estadio BBVA, Monterrey'),
  (55, 'ECU', 'GER', '2026-06-26T00:00:00Z', 'Lincoln Financial Field, Filadelfia'),
  (56, 'CUW', 'CIV', '2026-06-25T20:00:00Z', 'MetLife Stadium, Nueva York/Nueva Jersey'),
  (57, 'TUN', 'NED', '2026-06-25T23:00:00Z', 'AT&T Stadium, Arlington'),
  (58, 'JPN', 'UEP_B', '2026-06-25T23:00:00Z', 'Arrowhead Stadium, Kansas City'),
  (59, 'UEP_C', 'USA', '2026-06-26T02:00:00Z', 'SoFi Stadium, Los Ángeles'),
  (60, 'PAR', 'AUS', '2026-06-26T02:00:00Z', 'Levi''s Stadium, Santa Clara'),
  (61, 'NOR', 'FRA', '2026-06-26T19:00:00Z', 'Gillette Stadium, Boston'),
  (62, 'SEN', 'ICP_2', '2026-06-26T19:00:00Z', 'BMO Field, Toronto'),
  (63, 'NZL', 'BEL', '2026-06-27T03:00:00Z', 'Lumen Field, Seattle'),
  (64, 'EGY', 'IRN', '2026-06-27T03:00:00Z', 'BC Place, Vancouver'),
  (65, 'URU', 'ESP', '2026-06-27T00:00:00Z', 'NRG Stadium, Houston'),
  (66, 'CPV', 'KSA', '2026-06-27T00:00:00Z', 'Estadio Akron, Guadalajara'),
  (67, 'PAN', 'ENG', '2026-06-27T21:00:00Z', 'MetLife Stadium, Nueva York/Nueva Jersey'),
  (68, 'CRO', 'GHA', '2026-06-27T21:00:00Z', 'Lincoln Financial Field, Filadelfia'),
  (69, 'JOR', 'ARG', '2026-06-28T02:00:00Z', 'Arrowhead Stadium, Kansas City'),
  (70, 'ALG', 'AUT', '2026-06-28T02:00:00Z', 'AT&T Stadium, Arlington'),
  (71, 'COL', 'POR', '2026-06-27T23:00:00Z', 'Hard Rock Stadium, Miami'),
  (72, 'ICP_1', 'UZB', '2026-06-27T23:00:00Z', 'Mercedes-Benz Stadium, Atlanta')
) AS u(external_id, home, away, fecha_hora, estadio)
JOIN teams t1 ON t1.codigo = u.home
JOIN teams t2 ON t2.codigo = u.away
ON CONFLICT (external_id) DO NOTHING;
